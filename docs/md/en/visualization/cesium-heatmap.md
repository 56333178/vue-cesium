# CesiumHeatMap

`cesium-heatmap` The heat map component uses `rectangle-graphics`, `rectangle-geometry` or `singletile-imagery-provider` in combination with `heatmap.js` to implement the heat map function. The heat map is generated by `heatmap.js` by inputting data and implemented as a material or texture map of the component. The default is the `rectangle-geometry` component.

## Example

### add a CesiumHeatMap model to viewer

#### Preview

<doc-preview>
  <template>
    <div class="viewer">
      <cesium-viewer @ready="ready" :terrainProvider="terrainProvider">
        <cesium-heatmap ref="heatMap" :bounds="bounds" :options="options" :min="min" :max="max" :data="data">
        </cesium-heatmap>
      </cesium-viewer>
    </div>
  </template>
  <script>
    export default {
      data () {
        return {
          terrainProvider: null,
          bounds: {west: -109.0, south: 30.0, east: -80.0, north: 50.0},
          options: {
            backgroundColor: 'rgba(0,0,0,0)',
            gradient: {
              // enter n keys between 0 and 1 here
              // for gradient color customization
              '0.9': 'red',
              '0.8': 'orange',
              '0.7': 'yellow',
              '0.5': 'blue',
              '0.3': 'green'
            },
            // minCanvasSize: 10,
            // maxCanvasSize: 100,
            radius: 25,
            maxOpacity: 0.5,
            minOpacity: 0,
            blur: 0.75
          },
          data: [],
          min: 0,
          max: 0
        }
      },
      methods: {
        ready (cesiumInstance) {
          const {Cesium, viewer} = cesiumInstance
          this.cesiumInstance = cesiumInstance
          this.terrainProvider = Cesium.createWorldTerrain()
          Cesium.Resource.fetchJson({url: 'https://zouyaoji.top/vue-cesium/statics/SampleData/temperature.json'}).then((data)=>{
            this.bounds = {
              west: data.left,
              south: data.bottom,
              east: data.right,
              north: data.top
            }
            this.min = data.min
            this.max = data.max
            this.data = this.getData(data)
          })
        },
        getData (data) {
          var result = []
          let rows = data.rows
          let cols = data.cols
          let cellX = (data.right - data.left) / cols
          let cellY = (data.top - data.bottom) / rows
          for (let i = 0; i < rows; i++) {
            for (let j = 0; j < cols; j++) {
              let x = data.left + i * cellX
              let y = data.bottom + j * cellY
              let value = data.dvalues[i * cols + j]
              if (value !== data.noDataValue) {
                result.push({ x: x, y: y, value: value })
              }
            }
          }
          return result
        }
      }
    }
  </script>
</doc-preview>

#### Code

```html
<template>
  <div class="viewer">
    <cesium-viewer @ready="ready" :terrainProvider="terrainProvider">
      <cesium-heatmap ref="heatMap" :bounds="bounds" :options="options" :min="min" :max="max" :data="data">
      </cesium-heatmap>
    </cesium-viewer>
  </div>
</template>
<script>
  export default {
    data () {
      return {
        terrainProvider: null,
        bounds: {west: -109.0, south: 30.0, east: -80.0, north: 50.0},
        options: {
          backgroundColor: 'rgba(0,0,0,0)',
          gradient: {
            // enter n keys between 0 and 1 here
            // for gradient color customization
            '0.9': 'red',
            '0.8': 'orange',
            '0.7': 'yellow',
            '0.5': 'blue',
            '0.3': 'green'
          },
          // minCanvasSize: 10,
          // maxCanvasSize: 100,
          radius: 25,
          maxOpacity: 0.5,
          minOpacity: 0,
          blur: 0.75
        },
        data: [],
        min: 0,
        max: 0
      }
    },
    methods: {
      ready (cesiumInstance) {
        const {Cesium, viewer} = cesiumInstance
        this.cesiumInstance = cesiumInstance
        this.terrainProvider = Cesium.createWorldTerrain()
        Cesium.Resource.fetchJson({url: 'https://zouyaoji.top/vue-cesium/statics/SampleData/temperature.json'}).then((data)=>{
          this.bounds = {
            west: data.left,
            south: data.bottom,
            east: data.right,
            north: data.top
          }
          this.min = data.min
          this.max = data.max
          this.data = this.getData(data)
        })
      },
      getData (data) {
        var result = []
        let rows = data.rows
        let cols = data.cols
        let cellX = (data.right - data.left) / cols
        let cellY = (data.top - data.bottom) / rows
        for (let i = 0; i < rows; i++) {
          for (let j = 0; j < cols; j++) {
            let x = data.left + i * cellX
            let y = data.bottom + j * cellY
            let value = data.dvalues[i * cols + j]
            if (value !== data.noDataValue) {
              result.push({ x: x, y: y, value: value })
            }
          }
        }
        return result
      }
    }
  }
</script>
```

## Instance Properties

|name|type|default|description|
|------|-----|-----|----|
|type|Number|0|`optional` set type of heatmap, 0: RectangleGeometry, 1: RectangleGraphics, 2: SingleTileImageryProvider.|
|bounds|Object||`optional` set bounds of heatmap.|
|options|Object|true|`optional` set heatmap paramã€‚|
|min|Number||`optional` set min vaule.|
|max|Number||`optional` set max vaule.|
|data|Array|true|`optional` set heatmap data.|
---

## Events

|name|parameter|description|
|------|----|----|
|ready|{Cesium, viewer}|Triggers when Cesium3DTileset is ready. It returns a core class of Cesium, a viewer instance.|
